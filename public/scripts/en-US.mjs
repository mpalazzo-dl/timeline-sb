var Zn=Object.defineProperty,Jn=(r,i,t)=>i in r?Zn(r,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[i]=t,m=(r,i,t)=>Jn(r,typeof i!="symbol"?i+"":i,t),ft={0:8203,1:8204,2:8205,3:8290,4:8291,5:8288,6:65279,7:8289,8:119155,9:119156,a:119157,b:119158,c:119159,d:119160,e:119161,f:119162},ht={0:8203,1:8204,2:8205,3:65279},Xn=new Array(4).fill(String.fromCodePoint(ht[0])).join(""),ot="\0",qn=Object.fromEntries(Object.entries(ht).map(r=>r.reverse())),st=Object.fromEntries(Object.entries(ft).map(r=>r.reverse())),Wn=`${Object.values(ft).map(r=>`\\u{${r.toString(16)}}`).join("")}`,Qn=new RegExp(`[${Wn}]{4,}`,"gu");function er(r){let i=r.match(Qn);if(i)return tr(i[0],!0)[0]}function tr(r,i=!1){let t=Array.from(r);if(t.length%2===0){if(t.length%4||!r.startsWith(Xn))return nr(t,i)}else throw new Error("Encoded data has invalid length");let o=[];for(let a=t.length*.25;a--;){let c=t.slice(a*4,a*4+4).map(p=>qn[p.codePointAt(0)]).join("");o.unshift(String.fromCharCode(parseInt(c,4)))}if(i){o.shift();let a=o.indexOf(ot);return a===-1&&(a=o.length),[JSON.parse(o.slice(0,a).join(""))]}return o.join("").split(ot).filter(Boolean).map(a=>JSON.parse(a))}function nr(r,i){var t;let o=[];for(let l=r.length*.5;l--;){let d=`${st[r[l*2].codePointAt(0)]}${st[r[l*2+1].codePointAt(0)]}`;o.unshift(String.fromCharCode(parseInt(d,16)))}let a=[],c=[o.join("")],p=10;for(;c.length;){let l=c.shift();try{if(a.push(JSON.parse(l)),i)return a}catch(d){if(!p--)throw d;let v=+((t=d.message.match(/\sposition\s(\d+)$/))==null?void 0:t[1]);if(!v)throw d;c.unshift(l.substring(0,v),l.substring(v))}}return a}function rr(r){return er(r)}var Ae,at;function ir(){if(at)return Ae;at=1;var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString;return Ae=function(t,o,a){if(i.call(o)!=="[object Function]")throw new TypeError("iterator must be a function");var c=t.length;if(c===+c)for(var p=0;p<c;p++)o.call(a,t[p],p,t);else for(var l in t)r.call(t,l)&&o.call(a,t[l],l,t)},Ae}var De,ct;function or(){if(ct)return De;ct=1;var r=ir();De=i;function i(t,o,a){if(arguments.length===3)return i.set(t,o,a);if(arguments.length===2)return i.get(t,o);var c=i.bind(i,t);for(var p in i)i.hasOwnProperty(p)&&(c[p]=i[p].bind(c,t));return c}return i.get=function(t,o){for(var a=Array.isArray(o)?o:i.parse(o),c=0;c<a.length;++c){var p=a[c];if(!(typeof t=="object"&&p in t))throw new Error("Invalid reference token: "+p);t=t[p]}return t},i.set=function(t,o,a){var c=Array.isArray(o)?o:i.parse(o),p=c[0];if(c.length===0)throw Error("Can not set the root object");for(var l=0;l<c.length-1;++l){var d=c[l];typeof d!="string"&&typeof d!="number"&&(d=String(d)),!(d==="__proto__"||d==="constructor"||d==="prototype")&&(d==="-"&&Array.isArray(t)&&(d=t.length),p=c[l+1],d in t||(p.match(/^(\d+|-)$/)?t[d]=[]:t[d]={}),t=t[d])}return p==="-"&&Array.isArray(t)&&(p=t.length),t[p]=a,this},i.remove=function(t,o){var a=Array.isArray(o)?o:i.parse(o),c=a[a.length-1];if(c===void 0)throw new Error('Invalid JSON pointer for remove: "'+o+'"');var p=i.get(t,a.slice(0,-1));if(Array.isArray(p)){var l=+c;if(c===""&&isNaN(l))throw new Error('Invalid array index: "'+c+'"');Array.prototype.splice.call(p,l,1)}else delete p[c]},i.dict=function(t,o){var a={};return i.walk(t,function(c,p){a[p]=c},o),a},i.walk=function(t,o,a){var c=[];a=a||function(p){var l=Object.prototype.toString.call(p);return l==="[object Object]"||l==="[object Array]"},function p(l){r(l,function(d,v){c.push(String(v)),a(d)?p(d):o(d,i.compile(c)),c.pop()})}(t)},i.has=function(t,o){try{i.get(t,o)}catch{return!1}return!0},i.escape=function(t){return t.toString().replace(/~/g,"~0").replace(/\//g,"~1")},i.unescape=function(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")},i.parse=function(t){if(t==="")return[];if(t.charAt(0)!=="/")throw new Error("Invalid JSON pointer: "+t);return t.substring(1).split(/\//).map(i.unescape)},i.compile=function(t){return t.length===0?"":"/"+t.map(i.escape).join("/")},De}or();const sr="4.6.3";let mt=!1;function lt(r){mt=r}const Ie=r=>(...i)=>{mt&&console[r](...i)},I={error:Ie("error"),warn:Ie("warn"),log:Ie("log")};function ar(r,i=500){let t=window.location.href;const o=setInterval(()=>{const a=window.location.href;a!==t&&(t=a,r(a))},i);return()=>clearInterval(o)}const cr="live-preview-editor",lr="live-preview-sdk";function R(r,i,t){const o={...i,method:r,source:lr,location:window.location.href,version:sr};I.log("Send message",o),t.forEach(a=>{var c;(c=window.top)==null||c.postMessage(o,a)})}function ur(r,i=100){let t;return(...o)=>{clearTimeout(t),t=setTimeout(()=>{r.apply(this,o)},i)}}function pr(){var r;try{return((r=window.top)==null?void 0:r.location.href)!==window.location.href}catch{return!0}}function dr(){return`${performance.now()}-${Math.random().toString(36).slice(2)}`}function fr(r){return typeof r.data!="object"||!r.data?!1:"source"in r.data&&r.data.source===cr}var me=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hr(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var ve={exports:{}};ve.exports;var ut;function mr(){return ut||(ut=1,function(r,i){var t=200,o="__lodash_hash_undefined__",a=1,c=2,p=9007199254740991,l="[object Arguments]",d="[object Array]",v="[object AsyncFunction]",f="[object Boolean]",S="[object Date]",A="[object Error]",W="[object Function]",x="[object GeneratorFunction]",V="[object Map]",Q="[object Number]",ie="[object Null]",X="[object Object]",Le="[object Promise]",yt="[object Proxy]",Ne="[object RegExp]",oe="[object Set]",Me="[object String]",Tt="[object Symbol]",Ot="[object Undefined]",ge="[object WeakMap]",Re="[object ArrayBuffer]",se="[object DataView]",wt="[object Float32Array]",St="[object Float64Array]",At="[object Int8Array]",Dt="[object Int16Array]",It="[object Int32Array]",Ct="[object Uint8Array]",zt="[object Uint8ClampedArray]",Lt="[object Uint16Array]",Nt="[object Uint32Array]",Mt=/[\\^$.*+?()[\]{}|]/g,Rt=/^\[object .+?Constructor\]$/,jt=/^(?:0|[1-9]\d*)$/,b={};b[wt]=b[St]=b[At]=b[Dt]=b[It]=b[Ct]=b[zt]=b[Lt]=b[Nt]=!0,b[l]=b[d]=b[Re]=b[f]=b[se]=b[S]=b[A]=b[W]=b[V]=b[Q]=b[X]=b[Ne]=b[oe]=b[Me]=b[ge]=!1;var je=typeof me=="object"&&me&&me.Object===Object&&me,Ut=typeof self=="object"&&self&&self.Object===Object&&self,U=je||Ut||Function("return this")(),Ue=i&&!i.nodeType&&i,ke=Ue&&!0&&r&&!r.nodeType&&r,Pe=ke&&ke.exports===Ue,be=Pe&&je.process,xe=function(){try{return be&&be.binding&&be.binding("util")}catch{}}(),Ge=xe&&xe.isTypedArray;function kt(e,n){for(var s=-1,u=e==null?0:e.length,_=0,h=[];++s<u;){var y=e[s];n(y,s,e)&&(h[_++]=y)}return h}function Pt(e,n){for(var s=-1,u=n.length,_=e.length;++s<u;)e[_+s]=n[s];return e}function xt(e,n){for(var s=-1,u=e==null?0:e.length;++s<u;)if(n(e[s],s,e))return!0;return!1}function Gt(e,n){for(var s=-1,u=Array(e);++s<e;)u[s]=n(s);return u}function Bt(e){return function(n){return e(n)}}function Ft(e,n){return e.has(n)}function Vt(e,n){return e==null?void 0:e[n]}function $t(e){var n=-1,s=Array(e.size);return e.forEach(function(u,_){s[++n]=[_,u]}),s}function Ht(e,n){return function(s){return e(n(s))}}function Yt(e){var n=-1,s=Array(e.size);return e.forEach(function(u){s[++n]=u}),s}var Kt=Array.prototype,Zt=Function.prototype,ae=Object.prototype,_e=U["__core-js_shared__"],Be=Zt.toString,M=ae.hasOwnProperty,Fe=function(){var e=/[^.]+$/.exec(_e&&_e.keys&&_e.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ve=ae.toString,Jt=RegExp("^"+Be.call(M).replace(Mt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$e=Pe?U.Buffer:void 0,ce=U.Symbol,He=U.Uint8Array,Ye=ae.propertyIsEnumerable,Xt=Kt.splice,$=ce?ce.toStringTag:void 0,Ke=Object.getOwnPropertySymbols,qt=$e?$e.isBuffer:void 0,Wt=Ht(Object.keys,Object),Ee=q(U,"DataView"),ee=q(U,"Map"),ye=q(U,"Promise"),Te=q(U,"Set"),Oe=q(U,"WeakMap"),te=q(Object,"create"),Qt=K(Ee),en=K(ee),tn=K(ye),nn=K(Te),rn=K(Oe),Ze=ce?ce.prototype:void 0,we=Ze?Ze.valueOf:void 0;function H(e){var n=-1,s=e==null?0:e.length;for(this.clear();++n<s;){var u=e[n];this.set(u[0],u[1])}}function on(){this.__data__=te?te(null):{},this.size=0}function sn(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}function an(e){var n=this.__data__;if(te){var s=n[e];return s===o?void 0:s}return M.call(n,e)?n[e]:void 0}function cn(e){var n=this.__data__;return te?n[e]!==void 0:M.call(n,e)}function ln(e,n){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=te&&n===void 0?o:n,this}H.prototype.clear=on,H.prototype.delete=sn,H.prototype.get=an,H.prototype.has=cn,H.prototype.set=ln;function k(e){var n=-1,s=e==null?0:e.length;for(this.clear();++n<s;){var u=e[n];this.set(u[0],u[1])}}function un(){this.__data__=[],this.size=0}function pn(e){var n=this.__data__,s=ue(n,e);if(s<0)return!1;var u=n.length-1;return s==u?n.pop():Xt.call(n,s,1),--this.size,!0}function dn(e){var n=this.__data__,s=ue(n,e);return s<0?void 0:n[s][1]}function fn(e){return ue(this.__data__,e)>-1}function hn(e,n){var s=this.__data__,u=ue(s,e);return u<0?(++this.size,s.push([e,n])):s[u][1]=n,this}k.prototype.clear=un,k.prototype.delete=pn,k.prototype.get=dn,k.prototype.has=fn,k.prototype.set=hn;function Y(e){var n=-1,s=e==null?0:e.length;for(this.clear();++n<s;){var u=e[n];this.set(u[0],u[1])}}function mn(){this.size=0,this.__data__={hash:new H,map:new(ee||k),string:new H}}function vn(e){var n=pe(this,e).delete(e);return this.size-=n?1:0,n}function gn(e){return pe(this,e).get(e)}function bn(e){return pe(this,e).has(e)}function _n(e,n){var s=pe(this,e),u=s.size;return s.set(e,n),this.size+=s.size==u?0:1,this}Y.prototype.clear=mn,Y.prototype.delete=vn,Y.prototype.get=gn,Y.prototype.has=bn,Y.prototype.set=_n;function le(e){var n=-1,s=e==null?0:e.length;for(this.__data__=new Y;++n<s;)this.add(e[n])}function En(e){return this.__data__.set(e,o),this}function yn(e){return this.__data__.has(e)}le.prototype.add=le.prototype.push=En,le.prototype.has=yn;function G(e){var n=this.__data__=new k(e);this.size=n.size}function Tn(){this.__data__=new k,this.size=0}function On(e){var n=this.__data__,s=n.delete(e);return this.size=n.size,s}function wn(e){return this.__data__.get(e)}function Sn(e){return this.__data__.has(e)}function An(e,n){var s=this.__data__;if(s instanceof k){var u=s.__data__;if(!ee||u.length<t-1)return u.push([e,n]),this.size=++s.size,this;s=this.__data__=new Y(u)}return s.set(e,n),this.size=s.size,this}G.prototype.clear=Tn,G.prototype.delete=On,G.prototype.get=wn,G.prototype.has=Sn,G.prototype.set=An;function Dn(e,n){var s=de(e),u=!s&&Fn(e),_=!s&&!u&&Se(e),h=!s&&!u&&!_&&rt(e),y=s||u||_||h,T=y?Gt(e.length,String):[],O=T.length;for(var E in e)M.call(e,E)&&!(y&&(E=="length"||_&&(E=="offset"||E=="parent")||h&&(E=="buffer"||E=="byteLength"||E=="byteOffset")||kn(E,O)))&&T.push(E);return T}function ue(e,n){for(var s=e.length;s--;)if(Qe(e[s][0],n))return s;return-1}function In(e,n,s){var u=n(e);return de(e)?u:Pt(u,s(e))}function ne(e){return e==null?e===void 0?Ot:ie:$&&$ in Object(e)?jn(e):Bn(e)}function Je(e){return re(e)&&ne(e)==l}function Xe(e,n,s,u,_){return e===n?!0:e==null||n==null||!re(e)&&!re(n)?e!==e&&n!==n:Cn(e,n,s,u,Xe,_)}function Cn(e,n,s,u,_,h){var y=de(e),T=de(n),O=y?d:B(e),E=T?d:B(n);O=O==l?X:O,E=E==l?X:E;var D=O==X,N=E==X,w=O==E;if(w&&Se(e)){if(!Se(n))return!1;y=!0,D=!1}if(w&&!D)return h||(h=new G),y||rt(e)?qe(e,n,s,u,_,h):Mn(e,n,O,s,u,_,h);if(!(s&a)){var C=D&&M.call(e,"__wrapped__"),z=N&&M.call(n,"__wrapped__");if(C||z){var F=C?e.value():e,P=z?n.value():n;return h||(h=new G),_(F,P,s,u,h)}}return w?(h||(h=new G),Rn(e,n,s,u,_,h)):!1}function zn(e){if(!nt(e)||xn(e))return!1;var n=et(e)?Jt:Rt;return n.test(K(e))}function Ln(e){return re(e)&&tt(e.length)&&!!b[ne(e)]}function Nn(e){if(!Gn(e))return Wt(e);var n=[];for(var s in Object(e))M.call(e,s)&&s!="constructor"&&n.push(s);return n}function qe(e,n,s,u,_,h){var y=s&a,T=e.length,O=n.length;if(T!=O&&!(y&&O>T))return!1;var E=h.get(e);if(E&&h.get(n))return E==n;var D=-1,N=!0,w=s&c?new le:void 0;for(h.set(e,n),h.set(n,e);++D<T;){var C=e[D],z=n[D];if(u)var F=y?u(z,C,D,n,e,h):u(C,z,D,e,n,h);if(F!==void 0){if(F)continue;N=!1;break}if(w){if(!xt(n,function(P,Z){if(!Ft(w,Z)&&(C===P||_(C,P,s,u,h)))return w.push(Z)})){N=!1;break}}else if(!(C===z||_(C,z,s,u,h))){N=!1;break}}return h.delete(e),h.delete(n),N}function Mn(e,n,s,u,_,h,y){switch(s){case se:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case Re:return!(e.byteLength!=n.byteLength||!h(new He(e),new He(n)));case f:case S:case Q:return Qe(+e,+n);case A:return e.name==n.name&&e.message==n.message;case Ne:case Me:return e==n+"";case V:var T=$t;case oe:var O=u&a;if(T||(T=Yt),e.size!=n.size&&!O)return!1;var E=y.get(e);if(E)return E==n;u|=c,y.set(e,n);var D=qe(T(e),T(n),u,_,h,y);return y.delete(e),D;case Tt:if(we)return we.call(e)==we.call(n)}return!1}function Rn(e,n,s,u,_,h){var y=s&a,T=We(e),O=T.length,E=We(n),D=E.length;if(O!=D&&!y)return!1;for(var N=O;N--;){var w=T[N];if(!(y?w in n:M.call(n,w)))return!1}var C=h.get(e);if(C&&h.get(n))return C==n;var z=!0;h.set(e,n),h.set(n,e);for(var F=y;++N<O;){w=T[N];var P=e[w],Z=n[w];if(u)var it=y?u(Z,P,w,n,e,h):u(P,Z,w,e,n,h);if(!(it===void 0?P===Z||_(P,Z,s,u,h):it)){z=!1;break}F||(F=w=="constructor")}if(z&&!F){var fe=e.constructor,he=n.constructor;fe!=he&&"constructor"in e&&"constructor"in n&&!(typeof fe=="function"&&fe instanceof fe&&typeof he=="function"&&he instanceof he)&&(z=!1)}return h.delete(e),h.delete(n),z}function We(e){return In(e,Hn,Un)}function pe(e,n){var s=e.__data__;return Pn(n)?s[typeof n=="string"?"string":"hash"]:s.map}function q(e,n){var s=Vt(e,n);return zn(s)?s:void 0}function jn(e){var n=M.call(e,$),s=e[$];try{e[$]=void 0;var u=!0}catch{}var _=Ve.call(e);return u&&(n?e[$]=s:delete e[$]),_}var Un=Ke?function(e){return e==null?[]:(e=Object(e),kt(Ke(e),function(n){return Ye.call(e,n)}))}:Yn,B=ne;(Ee&&B(new Ee(new ArrayBuffer(1)))!=se||ee&&B(new ee)!=V||ye&&B(ye.resolve())!=Le||Te&&B(new Te)!=oe||Oe&&B(new Oe)!=ge)&&(B=function(e){var n=ne(e),s=n==X?e.constructor:void 0,u=s?K(s):"";if(u)switch(u){case Qt:return se;case en:return V;case tn:return Le;case nn:return oe;case rn:return ge}return n});function kn(e,n){return n=n??p,!!n&&(typeof e=="number"||jt.test(e))&&e>-1&&e%1==0&&e<n}function Pn(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}function xn(e){return!!Fe&&Fe in e}function Gn(e){var n=e&&e.constructor,s=typeof n=="function"&&n.prototype||ae;return e===s}function Bn(e){return Ve.call(e)}function K(e){if(e!=null){try{return Be.call(e)}catch{}try{return e+""}catch{}}return""}function Qe(e,n){return e===n||e!==e&&n!==n}var Fn=Je(function(){return arguments}())?Je:function(e){return re(e)&&M.call(e,"callee")&&!Ye.call(e,"callee")},de=Array.isArray;function Vn(e){return e!=null&&tt(e.length)&&!et(e)}var Se=qt||Kn;function $n(e,n){return Xe(e,n)}function et(e){if(!nt(e))return!1;var n=ne(e);return n==W||n==x||n==v||n==yt}function tt(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=p}function nt(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}function re(e){return e!=null&&typeof e=="object"}var rt=Ge?Bt(Ge):Ln;function Hn(e){return Vn(e)?Dn(e):Nn(e)}function Yn(){return[]}function Kn(){return!1}r.exports=$n}(ve,ve.exports)),ve.exports}var vr=mr();const gr=hr(vr);var g=(r=>(r.FIELD_ID="data-contentful-field-id",r.ENTRY_ID="data-contentful-entry-id",r.ASSET_ID="data-contentful-asset-id",r.LOCALE="data-contentful-locale",r.SPACE="data-contentful-space",r.ENVIRONMENT="data-contentful-environment",r))(g||{}),J=(r=>(r.MOUSE_MOVE="MOUSE_MOVE",r.SCROLL_START="SCROLL_START",r.SCROLL_END="SCROLL_END",r.RESIZE_START="RESIZE_START",r.RESIZE_END="RESIZE_END",r.TAGGED_ELEMENTS="TAGGED_ELEMENTS",r.INSPECTOR_MODE_CHANGED="INSPECTOR_MODE_CHANGED",r))(J||{}),vt={0:8203,1:8204,2:8205,3:8290,4:8291,5:8288,6:65279,7:8289,8:119155,9:119156,a:119157,b:119158,c:119159,d:119160,e:119161,f:119162},gt={0:8203,1:8204,2:8205,3:65279};new Array(4).fill(String.fromCodePoint(gt[0])).join("");Object.fromEntries(Object.entries(gt).map(r=>r.reverse()));Object.fromEntries(Object.entries(vt).map(r=>r.reverse()));var br=`${Object.values(vt).map(r=>`\\u{${r.toString(16)}}`).join("")}`,_r=new RegExp(`[${br}]{4,}`,"gu");const Er=r=>{if(!r||r.nodeType!==Node.ELEMENT_NODE)return!1;const i=r;return!(!i.hasAttribute(g.FIELD_ID)||!i.hasAttribute(g.ENTRY_ID)&&!i.hasAttribute(g.ASSET_ID))};function yr(r,i){if(!Er(r))return null;const t={fieldId:r.getAttribute(g.FIELD_ID),locale:r.getAttribute(g.LOCALE)??i.locale,environment:r.getAttribute(g.ENVIRONMENT)??i.environment,space:r.getAttribute(g.SPACE)??i.space,manuallyTagged:!0};if(!t.fieldId)return I.warn("Element is missing field ID attribute and cannot be tagged",{id:r.getAttribute(g.ENTRY_ID)??r.getAttribute(g.ASSET_ID),sharedProps:t}),null;const o=r.getAttribute(g.ENTRY_ID);if(o)return{...t,entryId:o};const a=r.getAttribute(g.ASSET_ID);return a?{...t,assetId:a}:null}function bt(r,i){return r.href===i.href}function Tr(r,i){return!(!bt(r.sourceMap,i.sourceMap)||r.element!==i.element)}function Or(r){let i=[];return typeof r.matches=="function"&&r.matches("*")&&(i=[r]),[...i,...Array.from(r.querySelectorAll("*:not(script,style,meta,title)"))].map(t=>({node:t,text:wr(t)})).filter(({text:t})=>!!(t&&t.match(_r)))}function wr(r){return r.matches("input[type=submit], input[type=button], input[type=reset]")?r.value:r.matches("img, video")?r.alt:Array.from(r.childNodes).filter(i=>i.nodeType===Node.TEXT_NODE&&!!i.textContent).map(i=>i.textContent).join("")}function Sr(r,i){for(const t of i)if(t.element===r||t.element.contains(r))return!0;return!1}function ze({root:r=window.document,options:i}){const t=[...i.ignoreManuallyTaggedElements?[]:r.querySelectorAll(`[${g.ASSET_ID}][${g.FIELD_ID}], [${g.ENTRY_ID}][${g.FIELD_ID}]`)].map(l=>({element:l,attributes:yr(l,i)})).filter(({attributes:l})=>l!==null),o=[],a=Or("body"in r?r.body:r);for(const{node:l,text:d}of a){const v=rr(d);if(!v||!v.origin.includes("contentful.com")){I.warn("Element has missing or invalid ContentSourceMap, please check if you have correctly enabled ContentSourceMaps and that the element's data originates from Contentful",{node:l,sourceMap:v});continue}if(!(Sr(l,t)||o.some(f=>f.element.contains(l)&&bt(f.sourceMap,v)))){if(l.matches("img")){const f=l.closest("figure")||l.closest("picture")||l;o.push({element:f,sourceMap:v});continue}o.push({element:l,sourceMap:v})}}const c=o.filter((l,d)=>o.findIndex(v=>Tr(l,v))===d);for(const{element:l,sourceMap:d}of c){let v=null;if(d.href){const f=zr(d.href);if(!f)continue;if(f.entityType==="Asset")v={fieldId:f.fieldId,locale:f.locale,space:f.space,environment:f.environment,assetId:f.entityId};else if(f.entityType==="Entry")v={fieldId:f.fieldId,locale:f.locale,space:f.space,environment:f.environment,entryId:f.entityId};else{I.warn("Unknown entityType",{element:l,sourceMap:d});continue}}else if(d.contentful&&Lr(d.contentful)){const f=d.contentful;if(!f.entity||!f.field||!f.locale||!f.space||!f.environment){I.warn("Element has missing information in their ContentSourceMap, please check if you have restricted the platform for the encoding. (Missing parameters in `contentful`)",{element:l,sourceMap:d});continue}const S={fieldId:f.field,locale:f.locale,space:f.space,environment:f.environment};if(f.entityType==="Asset")S.assetId=f.entity,v=S;else if(f.entityType==="Entry")S.entryId=f.entity,v=S;else{I.warn("Unknown entityType in contentful data",{element:l,sourceMap:d});continue}}else{I.warn("Element has neither href nor contentful data in their ContentSourceMap, unable to extract attributes.",{element:l,sourceMap:d});continue}t.push({element:l,attributes:v})}const p=t.filter(({attributes:l})=>(l==null?void 0:l.manuallyTagged)===!1||!(l!=null&&l.manuallyTagged)).length;return{taggedElements:t,manuallyTaggedCount:t.length-p,automaticallyTaggedCount:p,autoTaggedElements:c}}function _t({options:r}){return[...new Set(ze({options:r}).taggedElements.map(i=>i.attributes&&"entryId"in i.attributes?i.attributes.entryId:null).filter(Boolean))]}const Ar=(r,i,t=window.document)=>{const{top:o,right:a,bottom:c,left:p}=i,l=t.elementFromPoint(p+1,o+1),d=t.elementFromPoint(a-1,o+1),v=t.elementFromPoint(p+1,c-1),f=t.elementFromPoint(a-1,c-1);return!(l===r&&d===r&&v===r&&f===r)},Dr=(r,i=window.document)=>r.map(t=>({...t,isVisible:t.element.checkVisibility({checkOpacity:!0,checkVisibilityCSS:!0}),isCoveredByOtherElement:Ar(t.element,t.coordinates,i)})),Ir=r=>r.map(({element:i,attributes:t})=>({element:i,coordinates:i.getBoundingClientRect(),attributes:t})),Cr=(r,i=window.document)=>{const t=Ir(r);return Dr(t,i)};function zr(r){try{const i=new URL(r),t=i.searchParams.get("focusedField"),o=i.searchParams.get("focusedLocale"),a=i.pathname.split("/").filter(Boolean),c=a.indexOf("spaces"),p=a.indexOf("environments"),l=c!==-1?a[c+1]:void 0,d=p!==-1?a[p+1]:void 0;let v,f;const S=a.indexOf("entries"),A=a.indexOf("assets");return S!==-1?(v="Entry",f=a[S+1]):A!==-1&&(v="Asset",f=a[A+1]),!v||!f?(console.warn("Unable to determine entityType or entityId from href",{href:r}),null):t?o?!l||!d?(console.warn("Missing space or environment in href path",{href:r}),null):{entityId:f,entityType:v,fieldId:t,locale:o,space:l,environment:d}:(console.warn("Missing focusedLocale query parameter in href",{href:r}),null):(console.warn("Missing focusedField query parameter in href",{href:r}),null)}catch(i){return console.warn("Invalid href URL",{href:r,error:i}),null}}function Lr(r){return r&&typeof r.entity=="string"&&typeof r.field=="string"&&typeof r.locale=="string"&&typeof r.space=="string"&&typeof r.environment=="string"&&(r.entityType==="Asset"||r.entityType==="Entry")}class Nr{constructor(i){m(this,"delay",300),m(this,"isScrolling",!1),m(this,"scrollTimeout"),m(this,"isResizing",!1),m(this,"resizeTimeout"),m(this,"hoveredElement"),m(this,"taggedElements",[]),m(this,"manuallyTaggedCount",0),m(this,"automaticallyTaggedCount",0),m(this,"intersectionObserver"),m(this,"observersCB",[]),m(this,"cleanupCB",[]),m(this,"init",()=>{this.cleanupCB=[this.addScrollListener(),this.addMutationListener(document.body),this.addResizeListener(),this.addHoverListener()],this.updateElements()}),m(this,"cleanup",()=>{this.observersCB.forEach(t=>t()),this.cleanupCB.forEach(t=>t())}),m(this,"receiveMessage",t=>{if(t.method===J.INSPECTOR_MODE_CHANGED){const{isInspectorActive:o}=t;o?this.init():this.cleanup()}}),m(this,"observe",t=>{this.intersectionObserver.observe(t);const o=this.addMutationListener(t);this.observersCB.push(o,()=>this.intersectionObserver.unobserve(t))}),m(this,"addScrollListener",()=>{const{targetOrigin:t}=this.options,o=()=>{this.isScrolling||(this.isScrolling=!0,R(J.SCROLL_START,{},t)),this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(()=>{this.isScrolling=!1,R(J.SCROLL_END,{},t),this.updateElements()},this.delay)},a={capture:!0,passive:!0};return window.addEventListener("scroll",o,a),()=>window.removeEventListener("scroll",o,a)}),m(this,"addMutationListener",t=>{const o=new MutationObserver(()=>{this.updateElements()});return o.observe(t,{characterData:!0,attributes:!0,attributeFilter:[g.ENTRY_ID,g.FIELD_ID,g.LOCALE,g.SPACE,g.ENVIRONMENT,"class","style"],childList:!0,subtree:!0}),()=>o.disconnect()}),m(this,"addResizeListener",()=>{const{targetOrigin:t}=this.options,o=new ResizeObserver(()=>{this.isResizing||(this.isResizing=!0,R(J.RESIZE_START,{},t)),this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this.isResizing=!1,R(J.RESIZE_END,{},t),this.updateElements()},this.delay)});return o.observe(document.body),()=>o.disconnect()}),m(this,"addHoverListener",()=>{const t=ur(a=>{let c;for(const p of a){const l=p;if(l.nodeName==="BODY")break;const d=this.taggedElements.find(v=>v.element===l);if(d){c=d;break}}this.hoveredElement=c==null?void 0:c.element,this.updateElements()},this.delay),o=a=>{t(a.composedPath())};return window.addEventListener("mouseover",o,{passive:!0}),()=>window.removeEventListener("mouseover",o)}),m(this,"sendTaggedElements",()=>{R(J.TAGGED_ELEMENTS,{elements:this.taggedElements.map(t=>({coordinates:t.coordinates,isVisible:!!t.isVisible,attributes:t.attributes,isHovered:this.hoveredElement===t.element,isCoveredByOtherElement:!!t.isCoveredByOtherElement})),automaticallyTaggedCount:this.automaticallyTaggedCount,manuallyTaggedCount:this.manuallyTaggedCount},this.options.targetOrigin)}),m(this,"updateElements",()=>{const{taggedElements:t,manuallyTaggedCount:o,automaticallyTaggedCount:a}=ze({options:this.options}),c=Cr(t);gr(c,this.taggedElements)||(this.observersCB.forEach(p=>p()),this.observersCB=[],this.taggedElements=c,t.forEach(({element:p})=>this.observe(p)),this.manuallyTaggedCount=o,this.automaticallyTaggedCount=a)}),this.options=i,this.intersectionObserver=new IntersectionObserver(t=>{const o=this.taggedElements;for(const a of t)if(a.isIntersecting)for(const c of o)c.element===a.target&&(c.coordinates=a.intersectionRect,c.isVisible=a.target.checkVisibility({checkOpacity:!0,checkVisibilityCSS:!0}));this.taggedElements=o,this.sendTaggedElements()},{threshold:.15})}}const{parse:$r,stringify:Mr}=JSON,Rr=String,jr="string",Ur="object",kr=(r,i)=>i,pt=(r,i,t)=>{const o=Rr(i.push(t)-1);return r.set(t,o),o},Pr=(r,i,t)=>{const o=kr,a=new Map,c=[],p=[];let l=+pt(a,c,o.call({"":r},"",r)),d=!l;for(;l<c.length;)d=!0,p[l]=Mr(c[l++],v,t);return"["+p.join(",")+"]";function v(f,S){if(d)return d=!d,S;const A=o.call(this,f,S);switch(typeof A){case Ur:if(A===null)return A;case jr:return a.get(A)||pt(a,c,A)}return A}};var j=(r=>(r.CONNECTED="CONNECTED",r.DISCONNECTED="DISCONNECTED",r.ERROR="ERROR",r.TAGGED_FIELD_CLICKED="TAGGED_FIELD_CLICKED",r.URL_CHANGED="URL_CHANGED",r.SUBSCRIBED="SUBSCRIBED",r.UNSUBSCRIBED="UNSUBSCRIBED",r.ENTRY_UPDATED="ENTRY_UPDATED",r.ENTRY_SAVED="ENTRY_SAVED",r.DEBUG_MODE_ENABLED="DEBUG_MODE_ENABLED",r))(j||{});function xr(r,i){R("TAGGED_FIELD_CLICKED",{action:"TAGGED_FIELD_CLICKED",...r},i)}function Gr(r,i){R("TAGGED_FIELD_CLICKED",{action:"TAGGED_FIELD_CLICKED",...r},i)}class Br{constructor({locale:i,targetOrigin:t}){m(this,"subscriptions",new Map),m(this,"defaultLocale"),m(this,"sendMessage"),this.defaultLocale=i,this.sendMessage=(o,a)=>R(o,a,t)}async receiveMessage(i){if(i.method===j.ENTRY_UPDATED){const{data:t,subscriptionId:o}=i,a=this.subscriptions.get(o);a?(a.callback(t),a.data=t,this.subscriptions.set(o,a)):I.error("Received an update for an unknown subscription",{subscriptionId:o,data:t,subscriptions:this.subscriptions})}}subscribe(i){const t=dr(),o=i.locale??this.defaultLocale;this.subscriptions.set(t,{...i});const a={locale:o,event:"edit",id:t,config:Pr(i)};return this.sendMessage(j.SUBSCRIBED,a),()=>{this.sendMessage(j.UNSUBSCRIBED,a),this.subscriptions.delete(t)}}}class Fr{constructor({locale:i,options:t}){m(this,"locale"),m(this,"options"),m(this,"subscription"),this.locale=i,this.options=t}subscribe(i){return this.subscription&&I.log("There is already a subscription for the save event, the existing one will be replaced."),this.subscription=i,()=>{this.subscription=void 0}}receiveMessage(i){if(i.method===j.ENTRY_SAVED&&this.subscription){const{entity:t}=i;_t({options:this.options}).includes(t.sys.id)&&this.subscription(t)}}}const dt=["https://app.contentful.com","https://app.eu.contentful.com","http://localhost:3001"],L=class Ce{static init(i){var t;if(typeof i!="object"||!(i!=null&&i.locale))throw new Error("Init function has to be called with a locale configuration (for example: `ContentfulLivePreview.init({ locale: 'en-US'})`)");const{debugMode:o,enableInspectorMode:a,enableLiveUpdates:c,locale:p,environment:l,space:d,targetOrigin:v}=i;if(typeof window<"u"){if(!pr())return this.liveUpdatesEnabled=!1,Promise.resolve(null);if(o&&lt(o),typeof a=="boolean"&&(this.inspectorModeEnabled=a),typeof c=="boolean"&&(this.liveUpdatesEnabled=c),this.locale=p,this.space=d,this.environment=l,this.initTargetOrigin(v),this.initialized)return I.log("You have already initialized the Live Preview SDK."),Promise.resolve(Ce.inspectorMode);this.inspectorModeEnabled&&(this.inspectorMode=new Nr({locale:p,space:d,environment:l,targetOrigin:this.targetOrigin,ignoreManuallyTaggedElements:(t=i.experimental)==null?void 0:t.ignoreManuallyTaggedElements})),this.liveUpdatesEnabled&&(this.liveUpdates=new Br({locale:p,targetOrigin:this.targetOrigin}),this.saveEvent=new Fr({locale:p,options:{locale:this.locale,space:this.space,environment:this.environment,targetOrigin:this.targetOrigin}})),window.addEventListener("message",x=>{var V,Q,ie;if(fr(x)){if(I.log("Received message",x.data),x.data.method===j.DEBUG_MODE_ENABLED){lt(!0);return}this.inspectorModeEnabled&&((V=this.inspectorMode)==null||V.receiveMessage(x.data)),this.liveUpdatesEnabled&&((Q=this.liveUpdates)==null||Q.receiveMessage(x.data),(ie=this.saveEvent)==null||ie.receiveMessage(x.data))}}),ar(()=>{R(j.URL_CHANGED,{action:j.URL_CHANGED,taggedElementCount:document.querySelectorAll(`[${g.ENTRY_ID}]`).length},this.targetOrigin)});const{taggedElements:f,manuallyTaggedCount:S,automaticallyTaggedCount:A}=this.inspectorModeEnabled?ze({options:{locale:this.locale,space:this.space,environment:this.environment}}):{taggedElements:[],manuallyTaggedCount:0,automaticallyTaggedCount:0},W=f.length;return R(j.CONNECTED,{action:j.CONNECTED,connected:!0,tags:W,taggedElementCount:W,locale:this.locale,isInspectorEnabled:this.inspectorModeEnabled,isLiveUpdatesEnabled:this.liveUpdatesEnabled,manuallyTaggedElementCount:S,automaticallyTaggedElementCount:A},this.targetOrigin),this.initialized=!0,Promise.resolve(Ce.inspectorMode)}}static initTargetOrigin(i){if(i)this.targetOrigin=Array.isArray(i)?i:[i];else{const t=window.location.ancestorOrigins,o=t?dt.find(a=>t.contains(a)):dt.find(a=>document.referrer.includes(a));if(!o)throw new Error("The current origin is not supported. Please provide a targetOrigin in the live preview configuration.");this.targetOrigin=[o]}}static subscribe(i,t){if(!this.liveUpdatesEnabled)return()=>{};const o=typeof i=="string"?i:"edit",a=typeof i=="object"?i:t;if(o==="save"){if(!this.saveEvent)throw new Error("Save event is not initialized, please call `ContentfulLivePreview.init()` first.");return this.saveEvent.subscribe(a.callback)}if(!this.liveUpdates)throw new Error("Live updates are not initialized, please call `ContentfulLivePreview.init()` first.");return this.liveUpdates.subscribe(a)}static getProps(i){const{fieldId:t,locale:o,environment:a,space:c}=i;if(!this.inspectorModeEnabled)return null;if(t){const p={...o?{[g.LOCALE]:o}:{},...a?{[g.ENVIRONMENT]:a}:{},...c?{[g.SPACE]:c}:{},[g.FIELD_ID]:t};if(o&&(p[g.LOCALE]=o),i.assetId!==void 0)return{...p,[g.ASSET_ID]:i.assetId};if(i.entryId!==void 0)return{...p,[g.ENTRY_ID]:i.entryId}}return I.warn("Missing property for inspector mode",{...i}),null}static toggleInspectorMode(){return this.inspectorModeEnabled=!this.inspectorModeEnabled,this.inspectorModeEnabled}static toggleLiveUpdatesMode(){return this.liveUpdatesEnabled=!this.liveUpdatesEnabled,this.liveUpdatesEnabled}static openEntryInEditor(i){const t={locale:this.locale,environment:this.environment,space:this.space};if(i.assetId!==void 0&&i.fieldId){Gr({...t,...i},this.targetOrigin);return}if(i.entryId!==void 0&&i.fieldId){xr({...t,...i},this.targetOrigin);return}I.error("Please provide field id and entry/asset id to openEntryInEditor.",{...i})}static getEntryList(){return _t({options:{locale:this.locale,space:this.space,environment:this.environment}})}};m(L,"initialized",!1),m(L,"inspectorMode",null),m(L,"liveUpdates",null),m(L,"saveEvent",null),m(L,"inspectorModeEnabled",!0),m(L,"liveUpdatesEnabled",!0),m(L,"locale"),m(L,"space"),m(L,"environment"),m(L,"sendMessage"),m(L,"targetOrigin");let Et=L;var Vr={NVM_INC:"/Users/mikepalazzo/.nvm/versions/node/v22.0.0/include/node",TERM_PROGRAM:"vscode",NODE:"/Users/mikepalazzo/.nvm/versions/node/v22.0.0/bin/node",INIT_CWD:"/Users/mikepalazzo/Dev/starter-apps/aces/aces-maverick",NVM_CD_FLAGS:"",SHELL:"/usr/local/bin/bash",TERM:"xterm-256color",TMPDIR:"/var/folders/t1/593cg90x2n30xf8pd8tp8hyw0000gn/T/",npm_config_global_prefix:"/Users/mikepalazzo/.nvm/versions/node/v22.0.0",TERM_PROGRAM_VERSION:"1.96.2",NODE_OPTIONS:' --require "/Users/mikepalazzo/Library/Application Support/Code/User/workspaceStorage/22d91a56995992dac8506695b8dd66f0/ms-vscode.js-debug/bootloader.js" ',MallocNanoZone:"0",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",COLOR:"1",npm_config_noproxy:"",npm_config_local_prefix:"/Users/mikepalazzo/Dev/starter-apps/aces/aces-maverick",USER:"mikepalazzo",NVM_DIR:"/Users/mikepalazzo/.nvm",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/Users/mikepalazzo/.nvm/versions/node/v22.0.0/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.mKH4AtHpzS/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/Users/mikepalazzo/.nvm/versions/node/v22.0.0/lib/node_modules/npm/bin/npm-cli.js",PATH:"/Users/mikepalazzo/Dev/starter-apps/aces/aces-maverick/node_modules/.bin:/Users/mikepalazzo/Dev/starter-apps/aces/node_modules/.bin:/Users/mikepalazzo/Dev/starter-apps/node_modules/.bin:/Users/mikepalazzo/Dev/node_modules/.bin:/Users/mikepalazzo/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/mikepalazzo/.nvm/versions/node/v22.0.0/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/Users/mikepalazzo/.nvm/versions/node/v22.0.0/bin:/Users/mikepalazzo/.nvm/versions/node/v22.0.0/bin:/Users/mikepalazzo/.nvm/versions/node/v21.1.0/bin:/Users/mikepalazzo/.nvm/versions/node/v21.1.0/bin:/Users/mikepalazzo/.nvm/versions/node/v20.0.0/bin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/Library/Apple/usr/bin:/Users/mikepalazzo/google-cloud-sdk/bin:/Users/mikepalazzo/.nvm/versions/node/v20.0.0/bin:/Users/mikepalazzo/Library/Application Support/Code/User/globalStorage/github.copilot-chat/debugCommand",npm_package_json:"/Users/mikepalazzo/Dev/starter-apps/aces/aces-maverick/package.json",_:"/Users/mikepalazzo/Dev/starter-apps/aces/aces-maverick/node_modules/.bin/vite",LaunchInstanceID:"6A2E1EA3-FB3F-43D6-A8F4-F45897CD3A72",VSCODE_INSPECTOR_OPTIONS:'{"inspectorIpc":"/var/folders/t1/593cg90x2n30xf8pd8tp8hyw0000gn/T/node-cdp.96865-4bdfd2bf-0.sock.deferred","deferredMode":true,"waitForDebugger":"","execPath":"/Users/mikepalazzo/.nvm/versions/node/v20.0.0/bin/node","onlyEntrypoint":false,"autoAttachMode":"always","openerId":"4fca2befbf4414c09b817e25"}',npm_config_userconfig:"/Users/mikepalazzo/.npmrc",npm_config_init_module:"/Users/mikepalazzo/.npm-init.js",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/mikepalazzo/Dev/starter-apps/aces/aces-maverick",npm_lifecycle_event:"build:scripts",EDITOR:"vi",npm_package_name:"aces-maverick",LANG:"en_US.UTF-8",npm_config_npm_version:"10.5.1",XPC_FLAGS:"0x0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",npm_package_engines_node:">=22.0.0",npm_config_node_gyp:"/Users/mikepalazzo/.nvm/versions/node/v22.0.0/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"0.1.0",XPC_SERVICE_NAME:"0",HOME:"/Users/mikepalazzo",SHLVL:"2",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",npm_config_cache:"/Users/mikepalazzo/.npm",LOGNAME:"mikepalazzo",npm_lifecycle_script:"vite build",VSCODE_GIT_IPC_HANDLE:"/var/folders/t1/593cg90x2n30xf8pd8tp8hyw0000gn/T/vscode-git-6734bacba0.sock",NVM_BIN:"/Users/mikepalazzo/.nvm/versions/node/v22.0.0/bin",npm_config_user_agent:"npm/10.5.1 node/v22.0.0 darwin x64 workspaces/false",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",SECURITYSESSIONID:"186a3",npm_config_unsafe_perm:"true",npm_node_execpath:"/Users/mikepalazzo/.nvm/versions/node/v22.0.0/bin/node",npm_config_prefix:"/Users/mikepalazzo/.nvm/versions/node/v22.0.0",COLORTERM:"truecolor",NODE_ENV:"production"};Et.init({locale:Vr.LOCALE||"en-US",debugMode:!0,enableLiveUpdates:!0});Et.subscribe("save",{callback:async()=>{const r=window.location.pathname;await fetch(`/api/revalidate?pathname=${r}`),window.location.reload()}});
